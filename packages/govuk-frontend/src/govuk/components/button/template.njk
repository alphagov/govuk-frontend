{% from "../../macros/attributes.njk" import govukAttributes %}

{#- Set classes for this component #}
{%- set classNames = "govuk-button" -%}

{%- if params.classes %}
  {% set classNames = classNames + " " + params.classes %}
{% endif %}

{%- if params.isStartButton %}
  {% set classNames = classNames + " govuk-button--start" %}
{% endif %}

{#- Determine type of element to use, if not explicitly set #}
{%- if params.element %}
  {% set element = params.element | lower %}
{% else %}
  {% if params.href %}
    {% set element = 'a' %}
  {% else %}
    {% set element = 'button' %}
  {% endif %}
{% endif -%}

{%- macro _startIcon() %}
  {#- The SVG needs `focusable="false"` so that Internet Explorer does not
  treat it as an interactive element - without this it will be
  'focusable' when using the keyboard to navigate. #}
 
  {# <svg class="govuk-button__start-icon" xmlns="http://www.w3.org/2000/svg" width="17.5" height="19" viewBox="0 0 33 40" aria-hidden="true" focusable="false">
    <path fill="currentColor" d="M0 0h13l20 20-20 20H0l20-20z"/>
  </svg> #}

  {# <svg class="govuk-button__start-icon" width="27" height="27" viewBox="0 0 27 27" aria-hidden="true" focusable="false" fill="none" xmlns="http://www.w3.org/2000/svg">
  <circle cx="13.385" cy="13.274" r="12.423" stroke="currentColor"/>
  <path d="M14.307 7.09a.5.5 0 0 1 .707 0l6.189 6.188-6.18 6.18a.5.5 0 0 1-.707-.707l5.472-5.473-5.482-5.48a.5.5 0 0 1 0-.708Z" fill="currentColor" stroke="currentColor" stroke-linecap="round"/>
  <path d="M6.066 13.774a.5.5 0 0 1 0-1h13.422a.5.5 0 1 1 0 1z" fill="currentColor" stroke="currentColor" stroke-linecap="round"/></svg> #}

<svg class="govuk-button__start-icon" width="26" height="26" viewBox="0 0 26 26" aria-hidden="true" focusable="false" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="13.0229" cy="12.6046" r="12.5" fill="currentColor"/>
<path d="M12.6125 5.28734C13.0491 4.81742 13.7842 4.7904 14.2542 5.22703L22.403 12.7991L14.2542 20.3709C13.7842 20.8075 13.0491 20.7805 12.6125 20.3106C12.176 19.8406 12.2029 19.1058 12.6728 18.6692L18.9902 12.7988L12.6728 6.92905C12.2029 6.49241 12.1758 5.75728 12.6125 5.28734Z" fill="#00703c"/>
<path d="M3.97003 13.9604C3.32858 13.9604 2.80849 13.4405 2.80844 12.7991C2.80844 12.1576 3.32855 11.6375 3.97003 11.6375L19.5823 11.6375C20.2238 11.6375 20.7439 12.1576 20.7439 12.7991C20.7439 13.4405 20.2238 13.9604 19.5823 13.9604L3.97003 13.9604Z" fill="#00703c"/>
</svg>

{%- endmacro -%}

{#- Define common attributes that we can use across all element types #}

{%- set commonAttributes %} class="{{ classNames }}" data-module="govuk-button" {{- govukAttributes(params.attributes) -}} {% if params.id %} id="{{ params.id }}"{% endif %}{% endset %}

{#- Define common attributes we can use for both button and input types #}

{%- set buttonAttributes %}{% if params.name %} name="{{ params.name }}"{% endif %}{% if params.disabled %} disabled aria-disabled="true"{% endif %}{% if params.preventDoubleClick !== undefined %} data-prevent-double-click="{{ params.preventDoubleClick }}"{% endif %}{% endset %}

{#- Actually create a button... or a link! #}

{%- if element == 'a' %}
<a href="{{ params.href if params.href else '#' }}" role="button" draggable="false" {{- commonAttributes | safe }}>
  {{ params.html | safe | trim | indent(2) if params.html else params.text }}
  {{- _startIcon() | safe if params.isStartButton }}
</a>

{%- elseif element == 'button' %}
<button {%- if params.value %} value="{{ params.value }}"{% endif %} type="{{ params.type if params.type else 'submit' }}" {{- buttonAttributes | safe }} {{- commonAttributes | safe }}>
  {{ params.html | safe | trim | indent(2) if params.html else params.text }}
  {{- _startIcon() | safe if params.isStartButton }}
</button>

{%- elseif element == 'input' %}
<input value="{{ params.text }}" type="{{ params.type if params.type else 'submit' }}" {{- buttonAttributes | safe }} {{- commonAttributes | safe }}>
{%- endif %}
