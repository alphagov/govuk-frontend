{#- This macro is for interal use within GOV.UK Frontend. It isn't intended for
external use and may receive undocumented breaking changes in non-breaking
releases of Frontend. #}

{% from "./attributes.njk" import govukAttributes %}

{% macro govukLogo(params) %}
  {#- Default options #}
  {%- set rebrand = params.rebrand | default(false) %}
  {%- set useLogotype = params.useLogotype | default(true) %}
  {%- set useTudorCrown = params.useTudorCrown | default(true) %}

  {# Force use of Tudor Crown if rebrand flag is on. #}
  {%- set useTudorCrown = true if rebrand else useTudorCrown  %}

  {#- Calculate how wide the logo needs to be for the given parameters. #}
  {%- set svgWidth = 32 if useTudorCrown else 36 %}
  {%- set svgWidth = svgWidth + 116 if (useLogotype and not rebrand) else svgWidth %}
  {%- set svgWidth = svgWidth + 127 if (useLogotype and rebrand) else svgWidth %}

  {#- Charles III's Tudor Crown icon has been the default since February 2024. #}
  {%- set _tudorCrown %}
    <g>
      <circle cx="10.1" cy="8.8" r="1.8"/>
      <circle cx="5.2" cy="11.7" r="1.8"/>
      <circle cx="1.9" cy="16.6" r="1.8"/>
      <circle cx="16" cy="15.3" r="1.8"/>
      <circle cx="21.9" cy="8.8" r="1.8"/>
      <circle cx="26.8" cy="11.7" r="1.8"/>
      <circle cx="30.1" cy="16.6" r="1.8"/>
      <circle cx="16" cy="15.3" r="1.8"/>
      <path d="m16.7 4.9.2-.2 2.3 1.2V2.5l-2.3.7s-.1-.2-.2-.2l.9-2.9h-3.4l.9 2.9s-.2.1-.2.2l-2.3-.7v3.4l2.3-1.2.2.2-1.3 4c-.5 1.4.6 2.9 2.1 2.9s2.5-1.4 2.1-2.9l-1.3-4Zm2 14s-1.7 1.9-2.1 3c1.1 0 2.1-.3 3.2-1.4l-.4 4.3c-1-1.4-2.2-2-2.9-1.9 0 1.5.2 3.4 2.9 3.6 1.9.2 3.4-.8 3.5-1.9.2-1.3-1-2.2-1.9-.8-.7-2.3 1.2-3 2.5-1.6-1-2.2-.9-3.8 1.2-5.4 1.5 2 1.3 3.7-.6 5.5 1.2-.7 3.1 0 2 2.3-.6-1.4-1.8-1.1-2.1.1-.2.9.3 1.9 1.5 2.1.9.2 2.4-.5 3.5-2.9-.6 0-1.2.3-2 .8l1.2-4c.3 1.1.7 1.9 1.1 2.3.3-.8.2-1.4 0-2.7l2.5.9c-1.3 1.8-2.6 4.3-3.7 8.8-3.7-.5-7.9-.8-12.3-.8s-8.6.3-12.3.8c-1.1-4.4-2.3-7-3.7-8.8l2.5-.9c-.2 1.3-.3 1.9 0 2.7.4-.4.8-1.1 1.1-2.3l1.2 4c-.7-.5-1.3-.8-2-.8 1.2 2.5 2.6 3.1 3.5 2.9 1.1-.2 1.7-1.2 1.5-2.1-.3-1.2-1.5-1.5-2.1-.1-1.1-2.3.8-3 2-2.3-1.9-1.9-2.1-3.5-.6-5.5C9 18.4 9 20 8.1 22.2c1.2-1.4 3.2-.7 2.5 1.6-.9-1.4-2.1-.5-1.9.8.2 1.1 1.7 2.1 3.5 1.9 2.7-.2 2.9-2.1 2.9-3.6-.7-.1-1.9.5-2.9 1.9l-.4-4.3c1.1 1.1 2.1 1.4 3.2 1.4-.4-1.2-2.1-3-2.1-3h5.3Z"/>
    </g>
  {%- endset %}

  {#- St. Edward's Crown was the logo under Elizabeth II. It's included to avoid
  a breaking change in services. It can be removed in Frontend v6. #}
  {%- set _stEdwardsCrown %}
    <path d="M6.9,12.2c1,.4,2.1-.1,2.5-1s-.1-2.1-1-2.5c-1-.4-2.1.1-2.5,1-.4,1,0,2.1,1,2.5M2.6,14.7c1,.4,2.1-.1,2.5-1s0-2.1-1-2.5c-1-.4-2.1.1-2.5,1-.5,1,0,2.1,1,2.5M1.3,19.5c1,.4,2.1-.1,2.5-1,.4-1,0-2.1-1-2.5-1-.4-2.1.1-2.5,1-.4,1,0,2.1,1,2.5M11.7,13.7c1,.4,2.1-.1,2.5-1s-.1-2.1-1-2.5c-1-.4-2.1.1-2.5,1s0,2.1,1,2.5M29.1,12.2c-1,.4-2.1-.1-2.5-1s.1-2.1,1-2.5c1-.4,2.1.1,2.5,1,.5,1,0,2.1-1,2.5M33.4,14.7c-1,.4-2.1-.1-2.5-1s.1-2.1,1-2.5c1-.4,2.1.1,2.5,1,.5,1,0,2.1-1,2.5M34.7,19.5c-1,.4-2.1-.1-2.5-1-.4-1,0-2.1,1-2.5,1-.4,2.1.1,2.5,1,.4,1,0,2.1-1,2.5M24.3,13.7c-1,.4-2.1-.1-2.5-1s.1-2.1,1-2.5c1-.4,2.1.1,2.5,1s0,2.1-1,2.5M19,8.8l2.4,1.3v-3.6l-2.4.8c-.1,0-.1-.2-.2-.2s1-3,1-3h-3.4l1,3c0,0-.2,0-.2.2-.1,0-2.4-.7-2.4-.7v3.5l2.4-1.3c-.1.1,0,.2.1.3l-1.4,4.2h0c-.1.2-.1.4-.1.7,0,1.1.8,2.1,1.9,2.2h.6c1.1-.2,1.9-1.1,1.9-2.2s0-.4-.1-.7,0,0,0,0h0l-1.4-4.2c.2-.1.3-.2.3-.3M18,29.1c4.6,0,8.9.3,12.8.9,1.1-4.6,2.4-7.2,3.8-9.1l-2.6-.9c.3,1.3.3,1.9,0,2.8-.4-.4-.8-1.2-1.1-2.4l-1.2,4.2c.8-.5,1.4-.9,2-.9-1.2,2.6-2.7,3.2-3.6,3-1.2-.2-1.7-1.3-1.5-2.2.3-1.3,1.6-1.6,2.2-.1,1.2-2.4-.8-3.1-2.1-2.4,1.9-1.9,2.2-3.6.6-5.7-2.2,1.7-2.2,3.3-1.2,5.6-1.3-1.5-3.3-.7-2.5,1.7.9-1.4,2.1-.5,2,.8-.2,1.2-1.7,2.1-3.7,2-2.8-.2-3-2.2-3-3.7.7-.1,1.9.5,3,2l.4-4.4c-1.1,1.2-2.2,1.4-3.3,1.4.4-1.2,2.1-3.1,2.1-3.1h-5.5s1.8,2,2.1,3.1c-1.1,0-2.2-.3-3.3-1.4l.4,4.4c1.1-1.5,2.3-2.1,3-2-.1,1.6-.2,3.5-3,3.7-1.9.2-3.5-.8-3.7-2-.2-1.3,1-2.2,1.9-.8.7-2.4-1.3-3.1-2.6-1.7,1-2.3,1-4-1.2-5.6-1.6,2.1-1.3,3.8.6,5.7-1.3-.7-3.2,0-2.1,2.4.6-1.5,1.9-1.1,2.2.1.2.9-.4,1.9-1.5,2.2-1,.2-2.5-.5-3.7-3,.7,0,1.3.4,2,.9l-1.5-4.2c-.3,1.2-.7,1.9-1.2,2.4-.3-.8-.2-1.5,0-2.8l-2.6.9c1.5,1.9,2.8,4.5,3.9,9.1,3.8-.5,8.2-.9,12.7-.9"/>

  {%- endset %}

  {#- The GOV.UK logotype with standard dot. This needs to be slightly offset if
  using the St. Edward's Crown, as that crown is wider. #}
  {%- set _logotype %}
    <path {%- if not useTudorCrown %} transform="translate(4 0)"{% endif %} d="M44.4,17.6c0,.9.1,1.8.3,2.6s.6,1.6,1,2.2,1,1.1,1.8,1.5,1.6.6,2.5.6,1.7-.1,2.4-.5,1.1-.7,1.5-1.1.6-.9.8-1.5.2-1,.2-1.5v-.2h-5.4v-3.2h9.5v11.5h-3.7v-2.5c-.3.4-.6.8-1,1.1s-.8.6-1.3.9-1,.4-1.6.6-1.2.2-1.8.2c-1.5,0-2.9-.3-4.1-.8s-2.2-1.3-3-2.3-1.4-2.1-1.9-3.4-.6-2.7-.6-4.2.2-2.9.7-4.2,1.2-2.5,2-3.4,1.9-1.7,3.2-2.3,2.6-.8,4.2-.8,1.9.1,2.8.3,1.7.6,2.5,1c.7.4,1.4.9,2,1.5s1,1.3,1.4,2l-3.7,2.1c-.2-.4-.5-.9-.8-1.2s-.7-.7-1-1-.8-.5-1.3-.7-1.1-.2-1.7-.2c-1,0-1.8.2-2.5.6s-1.3.9-1.8,1.5-.8,1.4-1,2.2-.3,1.7-.3,2.6h0c0,.1,0,.2,0,.2ZM71.8,6.7c1.6,0,3,.3,4.2.8,1.2.6,2.3,1.3,3.2,2.3s1.5,2.1,2,3.4.7,2.7.7,4.2-.2,2.9-.7,4.2-1.1,2.5-2,3.4-1.9,1.7-3.2,2.3-2.6.8-4.2.8-3-.3-4.2-.8-2.3-1.3-3.2-2.3-1.5-2.1-2-3.4-.7-2.7-.7-4.2.2-2.9.7-4.2,1.1-2.5,2-3.4c.9-1,1.9-1.7,3.2-2.3s2.6-.8,4.2-.8ZM71.8,24.5c.9,0,1.7-.2,2.4-.5s1.3-.8,1.8-1.4.8-1.3,1.1-2.2.4-1.8.4-2.8h0c0-1.1-.1-2-.4-2.9s-.6-1.6-1.1-2.2-1.1-1.1-1.8-1.4-1.5-.5-2.4-.5-1.7.2-2.4.5-1.3.8-1.8,1.4-.8,1.4-1.1,2.2-.4,1.8-.4,2.8h0c0,1.1.1,2,.4,2.9s.6,1.6,1.1,2.2,1.1,1.1,1.8,1.4,1.5.5,2.4.5ZM88.8,28l-5.9-21h4.8l4.1,15.8h.2l4-15.8h4.7l-5.9,21h-5.8ZM100.4,25.6c0-.4,0-.7.2-1s.3-.6.6-.8.5-.4.9-.6.7-.2,1-.2.7,0,1,.2.6.3.8.6.4.5.6.8.2.7.2,1,0,.7-.2,1-.3.6-.6.9-.5.4-.8.6-.7.2-1,.2-.7,0-1-.2-.6-.3-.9-.6-.4-.5-.6-.9-.2-.7-.2-1ZM117.7,24.5c.6,0,1.2,0,1.7-.3s1-.5,1.4-.8.7-.8.9-1.4.3-1.2.3-2V7h4.2v13.7c0,1.2-.2,2.2-.6,3.2s-1,1.8-1.8,2.4-1.7,1.2-2.7,1.5-2.2.5-3.4.5-2.4-.2-3.4-.5-1.9-.9-2.7-1.5c-.8-.7-1.3-1.5-1.8-2.4s-.6-2-.6-3.2V7h4.2v13c0,.8.1,1.4.3,2s.5,1,.9,1.4.8.6,1.4.8,1.1.3,1.7.3h0ZM130.4,7h4.2v9.1l7.5-9.1h5.2l-7.3,8.4,7.8,12.7h-4.9l-5.6-9.4-2.7,3v6.4h-4.2V7Z"/>
  {%- endset %}

  {#- The GOV.UK logotype with raised and coloured dot. This is only intended for
  use alongide the Tudor Crown, so don't bother with offsetting for the
  St. Edward's Crown. #}
  {%- set _dotLogotype %}
    <circle class="govuk-logo-dot" cx="109.81" cy="17.83" r="3.7"></circle>
    <path d="m43.61,17.93c0,.9.1,1.8.3,2.7s.6,1.6,1.1,2.3c.5.7,1.1,1.2,1.8,1.6s1.6.6,2.6.6,1.8-.2,2.4-.5c.7-.3,1.2-.7,1.6-1.2.4-.5.7-1,.8-1.5s.2-1,.2-1.5v-.2h-5.5v-3.3h9.8v12h-3.8v-2.7c-.3.4-.6.8-1,1.2-.4.4-.9.6-1.4.9-.5.2-1.1.4-1.7.6s-1.2.2-1.9.2c-1.6,0-3-.3-4.2-.9s-2.3-1.4-3.1-2.4-1.5-2.2-1.9-3.5-.7-2.8-.7-4.4.2-3,.7-4.4,1.2-2.5,2.1-3.5,2-1.8,3.3-2.4,2.7-.9,4.3-.9,2,.1,2.9.4c.9.2,1.8.6,2.5,1,.8.4,1.4,1,2,1.6s1.1,1.3,1.4,2.1l-3.8,2.2c-.2-.5-.5-.9-.8-1.3-.3-.4-.7-.7-1.1-1-.4-.3-.9-.5-1.4-.7s-1.1-.2-1.8-.2c-1,0-1.9.2-2.6.6-.7.4-1.3.9-1.8,1.6s-.8,1.4-1.1,2.3c-.2.9-.3,1.8-.3,2.7h0v.1l.1-.2Zm29.1-11.2c1.6,0,3.1.3,4.3.9,1.2.6,2.4,1.4,3.3,2.4s1.6,2.2,2,3.5.7,2.8.7,4.4-.2,3-.7,4.4-1.2,2.5-2,3.5-2,1.8-3.3,2.4-2.7.9-4.3.9-3.1-.3-4.3-.9-2.4-1.4-3.2-2.4-1.6-2.2-2-3.5-.7-2.8-.7-4.4.2-3,.7-4.4,1.2-2.5,2-3.5,2-1.8,3.2-2.4,2.7-.9,4.3-.9Zm0,18.3c.9,0,1.8-.2,2.5-.5s1.3-.9,1.8-1.5.9-1.4,1.1-2.2c.2-.9.4-1.8.4-2.8h0c0-1.1-.1-2.1-.4-3s-.6-1.6-1.1-2.3c-.5-.6-1.1-1.1-1.8-1.5s-1.6-.5-2.5-.5-1.8.2-2.5.5c-.7.4-1.3.9-1.8,1.5s-.9,1.4-1.1,2.3c-.2.9-.4,1.8-.4,2.8h0c0,1.2.1,2.1.4,3,.2.9.6,1.6,1.1,2.2s1.1,1.1,1.8,1.5c.7.4,1.6.5,2.5.5Zm18.1,3.8l-6.1-22h4.9l4.2,16.5h.2l4.1-16.5h4.9l-6.1,22h-6.1Zm36.9-3.8c.6,0,1.2,0,1.8-.3s1-.5,1.4-.9.7-.9.9-1.4c.2-.6.4-1.3.4-2V6.83h4.3v14.2c0,1.2-.2,2.3-.7,3.3-.4,1-1.1,1.8-1.8,2.5s-1.7,1.2-2.8,1.6-2.3.6-3.5.6-2.5-.2-3.5-.6c-1.1-.4-2-.9-2.8-1.6s-1.4-1.5-1.8-2.5-.7-2.1-.7-3.3V6.83h4.3v13.6c0,.8.1,1.5.4,2,.2.6.6,1.1,1,1.4.4.4.9.7,1.4.9s1.1.3,1.8.3h-.1Zm12.7-18.2h4.4v9.6l7.8-9.6h5.4l-7.5,8.8,8,13.2h-5.1l-5.7-9.9-2.8,3.1v6.7h-4.4V6.83h-.1Z"></path>
  {%- endset %}

  {#- The SVG needs `focusable="false"` so that Internet Explorer does not treat
  it as an interactive element - without this it will be 'focusable' when using
  the keyboard to navigate. #}
  <svg
    focusable="false"
    role="{{ "img" if params.ariaLabelText else "presentation" }}"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 {{ svgWidth }} 30"
    height="30"
    width="{{ svgWidth }}"
    {%- if params.classes %} class="{{ params.classes }}"{% endif %}
    {%- if params.ariaLabelText %} aria-label="{{ params.ariaLabelText }}"{% endif %}
    {{- govukAttributes(params.attributes) }}
  >
    {%- if params.ariaLabelText %}<title>{{ params.ariaLabelText }}</title>{% endif %}
    {{ (_stEdwardsCrown if not useTudorCrown else _tudorCrown) | safe | trim | indent(2) }}
    {% if useLogotype %}
      {{ (_dotLogotype if rebrand else _logotype) | safe | trim | indent(2) }}
    {% endif %}
  </svg>
{% endmacro %}
